<div id="msg-card" class="card border-primary mb-3">
  <div class="card-body">
    <h4 class="card-title">Success!</h4>
    <p class="card-text">Your price file for customer # <strong><%= customerId %></strong> is ready</p>
    <a id="download-link" href="/download/file/<%= uid %>">Download</a>
    <small>To request another price file <a href="/">click here</a></small>
  </div>
</div>

<script>
  // IE9+ polyfill for .remove();
  (function (arr) {
    arr.forEach(function (item) {
      if (item.hasOwnProperty('remove')) {
        return;
      }
      Object.defineProperty(item, 'remove', {
        configurable: true,
        enumerable: true,
        writable: true,
        value: function remove() {
          if (this.parentNode === null) {
            return;
          }
          this.parentNode.removeChild(this);
        }
      });
    });
  })([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

  (function () {
    const downloadLink = document.getElementById('download-link');
    downloadLink.addEventListener('click', function () {
      this.remove();
      let node = document.createElement('p');
      let text = document.createTextNode('Download complete');
      node.className = 'download-complete-msg';
      node.appendChild(text);
      document.getElementsByClassName('card-body')[0].appendChild(node);
    });
  })();
</script>